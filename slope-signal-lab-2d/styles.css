:root {
  --bg-top: #dce8f8;
  --bg-bottom: #c7d8ef;
  --panel-surface: rgba(242, 248, 255, 0.74);
  --panel-border: rgba(255, 255, 255, 0.52);
  --ink-strong: #0f2b52;
  --ink-soft: #395170;

  --hud-shadow: 0 24px 48px rgba(8, 24, 53, 0.34);
  --hud-glass: rgba(18, 35, 68, 0.46);
  --hud-glass-soft: rgba(18, 35, 68, 0.28);

  --ring-stroke: rgba(198, 222, 255, 0.3);
  --ring-stroke-strong: rgba(218, 235, 255, 0.52);

  --sector-fill: rgba(12, 30, 64, 0.5);
  --sector-stroke: rgba(169, 201, 248, 0.34);
  --sector-hover: rgba(20, 49, 100, 0.78);
  --sector-active: rgba(34, 92, 194, 0.9);

  --center-blue-1: #2f7cff;
  --center-blue-2: #1f5ec8;
  --center-blue-3: #1a4ba0;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  min-height: 100vh;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  color: var(--ink-strong);
  background:
    radial-gradient(circle at 15% -10%, rgba(255, 255, 255, 0.7), transparent 46%),
    radial-gradient(circle at 90% 10%, rgba(171, 204, 255, 0.35), transparent 42%),
    linear-gradient(180deg, var(--bg-top), var(--bg-bottom));
}

.page {
  max-width: 1100px;
  margin: 0 auto;
  padding: 18px;
}

.panel {
  background: var(--panel-surface);
  border: 1px solid var(--panel-border);
  border-radius: 18px;
  padding: 14px;
  box-shadow:
    0 18px 34px rgba(15, 37, 74, 0.16),
    inset 0 1px 0 rgba(255, 255, 255, 0.48);
  backdrop-filter: blur(8px) saturate(130%);
}

.panel h2 {
  margin: 0 0 12px;
  font-size: 0.78rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: #355176;
}

.stage-wrap {
  position: relative;
  width: min(100%, 920px);
  aspect-ratio: 1 / 1;
  margin: 0 auto;
  border-radius: 20px;
  border: 1px solid rgba(225, 237, 255, 0.7);
  background: #e6f0ff;
  overflow: hidden;
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.5),
    0 14px 28px rgba(11, 31, 62, 0.2);
}

#mountainBg {
  display: block;
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: saturate(1.02) contrast(1.02);
}

#mountainSvg {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: block;
}

.hud-overlay {
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 50% 45%, rgba(110, 156, 229, 0.1) 0%, rgba(10, 22, 46, 0.54) 68%),
    linear-gradient(180deg, rgba(8, 18, 36, 0.3) 0%, rgba(8, 18, 36, 0.58) 100%);
  backdrop-filter: blur(2px) saturate(120%);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 260ms ease;
}

.hud-overlay.signal-out {
  background:
    radial-gradient(circle at 50% 45%, rgba(118, 164, 236, 0.05) 0%, rgba(8, 18, 36, 0.3) 64%),
    linear-gradient(180deg, rgba(8, 18, 36, 0.12) 0%, rgba(8, 18, 36, 0.3) 100%);
}

.unlock-btn {
  min-height: 46px;
  border: 1px solid rgba(194, 220, 255, 0.8);
  border-radius: 999px;
  background: linear-gradient(135deg, #2f73ee 0%, #1f5ec8 55%, #1a4ea8 100%);
  color: #f8fbff;
  font-size: 0.88rem;
  font-weight: 800;
  letter-spacing: 0.04em;
  padding: 0.75rem 1.22rem;
  cursor: pointer;
  box-shadow:
    0 10px 22px rgba(16, 45, 92, 0.35),
    inset 0 1px 0 rgba(255, 255, 255, 0.4);
  transition: transform 140ms ease, box-shadow 180ms ease, filter 140ms ease;
}

.unlock-btn:hover {
  transform: translateY(-1px);
  filter: brightness(1.04);
}

.unlock-btn:active {
  transform: translateY(0) scale(0.985);
}

.hud-radial {
  position: absolute;
  inset: 0;
  opacity: 0;
  pointer-events: none;
  transition: opacity 220ms ease;
}

.hud-radial.unlocked {
  opacity: 1;
  pointer-events: auto;
}

.hud-radial.sending {
  pointer-events: none;
}

.radial-rings {
  position: absolute;
  left: 50%;
  top: 50%;
  width: 540px;
  height: 540px;
  transform: translate(-50%, -50%);
  pointer-events: none;
  display: block;
}

.ring {
  position: absolute;
  left: 50%;
  top: 50%;
  border-radius: 999px;
  transform: translate(-50%, -50%);
  border: 1px solid var(--ring-stroke);
}

.ring-a { width: 128px; height: 128px; border-color: var(--ring-stroke-strong); }
.ring-b { width: 220px; height: 220px; }
.ring-c { width: 320px; height: 320px; }
.ring-d { width: 420px; height: 420px; border-color: rgba(198, 222, 255, 0.22); }
.ring-e { width: 500px; height: 500px; border-color: rgba(198, 222, 255, 0.16); }

.hud-wheel {
  position: absolute;
  left: 50%;
  top: 50%;
  width: 520px;
  height: 520px;
  transform: translate(-50%, -50%);
  transition: transform 320ms cubic-bezier(0.22, 1, 0.36, 1), opacity 260ms ease;
  filter: var(--hud-shadow);
}

.hud-wheel.options-swap {
  opacity: 0.58;
  transform: translate(-50%, -50%) scale(0.985);
}

.hud-radial.menu-collapse .hud-wheel {
  transform: translate(-50%, -50%) scale(0.08);
  opacity: 0;
}

.wheel-sector {
  fill: var(--sector-fill);
  stroke: var(--sector-stroke);
  stroke-width: 1.25;
  cursor: pointer;
  transition: fill 160ms ease, stroke 160ms ease, filter 160ms ease, opacity 160ms ease;
}

.wheel-sector:hover {
  fill: var(--sector-hover);
  stroke: rgba(202, 224, 255, 0.6);
}

.wheel-sector.active {
  fill: var(--sector-active);
  stroke: rgba(230, 240, 255, 0.9);
  filter: drop-shadow(0 10px 18px rgba(24, 73, 158, 0.34));
}

.wheel-sector.locked {
  fill: rgba(31, 94, 200, 0.3);
  stroke: rgba(31, 94, 200, 0.56);
  opacity: 1;
  cursor: not-allowed;
}

.wheel-sector.hidden {
  opacity: 0;
  pointer-events: none;
}

.wheel-label {
  fill: #f0f6ff;
  font-size: 17px;
  font-weight: 620;
  text-anchor: middle;
  dominant-baseline: middle;
  pointer-events: none;
  letter-spacing: 0.01em;
  text-shadow: 0 1px 2px rgba(5, 16, 34, 0.46);
}

.option-label {
  font-size: 23px;
  font-weight: 620;
  letter-spacing: 0.012em;
  fill: #f6fbff;
}

.wheel-sector.active + .wheel-label,
.wheel-label.active {
  fill: #ffffff;
}

.wheel-label.hidden {
  opacity: 0;
}

.wheel-label.locked {
  fill: rgba(211, 227, 255, 0.82);
  opacity: 1;
}

.signal-sector[data-signal="green"],
.signal-sector[data-signal="blue"],
.signal-sector[data-signal="black"],
.signal-sector[data-signal="double"] {
  fill: rgba(8, 20, 42, 0.42);
}

.signal-sector {
  stroke-width: 1.9;
}

.signal-label {
  font-size: 74px;
  font-weight: 900;
  letter-spacing: 0;
  text-shadow: 0 1px 3px rgba(4, 14, 30, 0.34);
}

.signal-label[data-signal="green"] { fill: #2cb06f; }
.signal-label[data-signal="blue"] { fill: #2f6df1; }
.signal-label[data-signal="black"] { fill: #1a2230; }
.signal-label[data-signal="double"] { fill: #0f1218; }

.signal-label.active[data-signal="green"] { fill: #11633c; }
.signal-label.active[data-signal="blue"] { fill: #17469a; }
.signal-label.active[data-signal="black"] { fill: #0b0f16; }
.signal-label.active[data-signal="double"] { fill: #000000; }

.signal-sector[data-signal="green"].active { fill: rgba(16, 50, 31, 0.64); stroke: rgba(95, 201, 141, 0.94); }
.signal-sector[data-signal="blue"].active { fill: rgba(17, 45, 89, 0.68); stroke: rgba(120, 169, 255, 0.94); }
.signal-sector[data-signal="black"].active { fill: rgba(18, 24, 34, 0.76); stroke: rgba(170, 186, 211, 0.74); }
.signal-sector[data-signal="double"].active { fill: rgba(4, 6, 10, 0.88); stroke: rgba(170, 186, 211, 0.6); }
.signal-sector.active {
  stroke-width: 3.2;
  filter: drop-shadow(0 0 14px rgba(19, 45, 93, 0.5));
}

.wheel-label[data-group="crowd"],
.wheel-label[data-group="wind"],
.wheel-label[data-group="hazard"],
.wheel-label[data-group="slope"] {
  font-size: 46px;
  font-weight: 900;
  letter-spacing: 0;
}

.wheel-label[data-group="hazard"] {
  font-size: 54px;
}

.send-core {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 176px;
  height: 176px;
  border-radius: 999px;
  border: 1.8px solid rgba(184, 220, 255, 0.88);
  background:
    radial-gradient(circle at 35% 24%, var(--center-blue-1) 0%, var(--center-blue-2) 56%, var(--center-blue-3) 100%);
  color: #fff;
  font-size: 0.95rem;
  font-weight: 900;
  letter-spacing: 0.04em;
  cursor: pointer;
  box-shadow:
    0 18px 36px rgba(12, 38, 88, 0.44),
    inset 0 0 0 1px rgba(235, 244, 255, 0.26),
    inset 0 9px 18px rgba(255, 255, 255, 0.12);
  transition:
    opacity 150ms ease,
    top 640ms cubic-bezier(0.2, 0.9, 0.2, 1),
    transform 640ms cubic-bezier(0.2, 0.9, 0.2, 1),
    box-shadow 320ms ease,
    background 280ms ease,
    color 220ms ease,
    filter 220ms ease;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.send-core::before {
  content: "";
  position: absolute;
  inset: 8px;
  border-radius: 999px;
  border: 1px solid rgba(222, 236, 255, 0.26);
  pointer-events: none;
}

.send-core:disabled {
  opacity: 1;
  cursor: not-allowed;
  transform: translate(-50%, -50%);
}

.send-core-icon {
  width: 134px;
  height: 134px;
  object-fit: contain;
  display: none;
  filter: drop-shadow(0 2px 3px rgba(0, 0, 0, 0.24));
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.send-core-label {
  display: block;
  line-height: 1;
  position: relative;
  z-index: 2;
  text-align: center;
}

.send-core-label:empty { display: none; }

.send-core-label .line-stack {
  display: block;
  font-size: 0.86rem;
  font-weight: 900;
  letter-spacing: 0.095em;
  line-height: 1.2;
  text-transform: uppercase;
  text-shadow:
    0 1px 0 rgba(255, 255, 255, 0.22),
    0 3px 8px rgba(5, 15, 34, 0.45);
}

.send-core-label .line-bolt {
  display: block;
  margin-top: 0.26rem;
  font-size: 1.04rem;
  line-height: 1;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.34));
}

.option-sector {
  fill: rgba(22, 57, 118, 0.86);
  stroke: rgba(182, 212, 255, 0.62);
  stroke-width: 1.3;
  filter: drop-shadow(0 8px 16px rgba(11, 29, 58, 0.22));
}

.option-sector:hover {
  fill: rgba(38, 81, 154, 0.93);
  stroke: rgba(215, 233, 255, 0.8);
}

.option-sector.active {
  fill: rgba(70, 136, 246, 0.96);
  stroke: rgba(234, 244, 255, 0.96);
  filter: drop-shadow(0 10px 18px rgba(31, 94, 200, 0.34));
}

.option-sector.active + .option-label,
.option-label.active {
  fill: #ffffff;
}

.send-core.press {
  transform: translate(-50%, -50%) scale(0.92);
  box-shadow: 0 9px 18px rgba(14, 44, 98, 0.32);
}

.send-core.travel {
  top: 13.5%;
  transform: translate(-50%, -50%) scale(0.30);
}

.send-core.beacon-fast {
  color: transparent;
  text-indent: -9999px;
  overflow: hidden;
  background: radial-gradient(circle at 45% 40%, #6ea3ff 0%, #2f6df1 56%, #1d4fae 100%);
  box-shadow:
    0 0 0 0 rgba(82, 136, 255, 0.58),
    0 0 0 28px rgba(82, 136, 255, 0.34),
    0 10px 20px rgba(10, 34, 86, 0.35);
  animation: beacon-pulse-fast 0.22s ease-out 3;
}

@keyframes beacon-pulse-fast {
  0% {
    box-shadow:
      0 0 0 0 rgba(82, 136, 255, 0.62),
      0 0 0 18px rgba(82, 136, 255, 0.42),
      0 10px 20px rgba(10, 34, 86, 0.35);
  }
  72% {
    box-shadow:
      0 0 0 44px rgba(82, 136, 255, 0),
      0 0 0 64px rgba(82, 136, 255, 0),
      0 10px 20px rgba(10, 34, 86, 0.35);
  }
  100% {
    box-shadow:
      0 0 0 0 rgba(82, 136, 255, 0),
      0 0 0 0 rgba(82, 136, 255, 0),
      0 10px 20px rgba(10, 34, 86, 0.35);
  }
}

.hud-readout {
  display: none;
}

.trail-hidden {
  opacity: 0.16;
}

.trail-active {
  opacity: 1;
  filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.28));
}

.status {
  margin: 12px 0 2px;
  border: 1px solid rgba(193, 214, 238, 0.9);
  background: rgba(243, 250, 255, 0.92);
  border-radius: 12px;
  padding: 10px 12px;
  color: #284a74;
  font-size: 0.78rem;
  line-height: 1.4;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);
}

@media (max-width: 980px) {
  .hud-wheel {
    width: 430px;
    height: 430px;
  }

  .radial-rings {
    width: 448px;
    height: 448px;
  }

  .ring-a { width: 112px; height: 112px; }
  .ring-b { width: 184px; height: 184px; }
  .ring-c { width: 268px; height: 268px; }
  .ring-d { width: 342px; height: 342px; }
  .ring-e { width: 410px; height: 410px; }

  .wheel-label {
    font-size: 11px;
  }

  .option-label {
    font-size: 19px;
  }

  .signal-label {
    font-size: 50px;
  }

  .wheel-label[data-group="crowd"],
  .wheel-label[data-group="wind"],
  .wheel-label[data-group="hazard"],
  .wheel-label[data-group="slope"] {
    font-size: 30px;
  }

  .send-core {
    width: 140px;
    height: 140px;
    font-size: 0.8rem;
  }

  .send-core-icon {
    width: 102px;
    height: 102px;
  }

  .send-core-label .line-stack {
    font-size: 0.75rem;
    line-height: 1.08;
  }

  .send-core-label .line-bolt {
    font-size: 0.9rem;
  }
}

@media (max-width: 740px) {
  .page {
    padding: 12px;
  }

  .panel {
    border-radius: 16px;
    padding: 12px;
  }

  .stage-wrap {
    border-radius: 16px;
  }

  .hud-overlay {
    background:
      radial-gradient(circle at 50% 45%, rgba(110, 156, 229, 0.08) 0%, rgba(10, 18, 34, 0.62) 66%),
      linear-gradient(180deg, rgba(8, 18, 36, 0.34) 0%, rgba(8, 18, 36, 0.62) 100%);
  }

  .unlock-btn {
    font-size: 0.78rem;
    padding: 0.68rem 1rem;
  }

  .hud-wheel {
    width: 360px;
    height: 360px;
  }

  .radial-rings {
    width: 372px;
    height: 372px;
  }

  .ring-a { width: 92px; height: 92px; }
  .ring-b { width: 154px; height: 154px; }
  .ring-c { width: 220px; height: 220px; }
  .ring-d { width: 286px; height: 286px; }
  .ring-e { width: 344px; height: 344px; }

  .wheel-label {
    font-size: 10px;
  }

  .option-label {
    font-size: 16px;
  }

  .signal-label {
    font-size: 38px;
  }

  .wheel-label[data-group="crowd"],
  .wheel-label[data-group="wind"],
  .wheel-label[data-group="hazard"],
  .wheel-label[data-group="slope"] {
    font-size: 22px;
  }

  .wheel-label[data-group="hazard"] {
    font-size: 28px;
  }

  .send-core {
    width: 112px;
    height: 112px;
    font-size: 0.7rem;
  }

  .send-core-icon {
    width: 82px;
    height: 82px;
  }

  .send-core-label .line-stack {
    font-size: 0.62rem;
    letter-spacing: 0.075em;
    line-height: 1.05;
  }

  .send-core-label .line-bolt {
    font-size: 0.78rem;
    margin-top: 0.18rem;
  }
}
